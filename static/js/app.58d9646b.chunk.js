(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{157:function(e,t,n){"use strict";(function(e){var r=n(12),a=n.n(r),o=n(13),i=n.n(o),l=n(0),c=n.n(l),s=n(143),u=n(2),d=n(4),m=n(47),f=n(34),p=n(56),b=n(29),g=n(24),y=n(26);t.a=function(t){var n,r,o=t.Frenzy,u=t.navigation,v=t.containerStyle,O=t.afterDelete,w=Object(f.c)(y.c),E=Object(l.useState)(o),j=a()(E,2),x=j[0],S=j[1];function P(t,n){var r,a,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,i.a.awrap(t.get());case 2:if(r=l.sent,a=g.b.firestore(),0!==r.size){l.next=8;break}return n(),l.abrupt("return");case 8:return o=a.batch(),r.docs.forEach((function(e){o.delete(e.ref)})),l.next=12,i.a.awrap(o.commit());case 12:e.nextTick((function(){P(t,n)}));case 13:case"end":return l.stop()}}),null,null,null,Promise)}Object(l.useEffect)((function(){return S(o)}),[o]);var C=function(){var e,t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=w&&w.uid){r.next=2;break}return r.abrupt("return",u.navigate("Frenzy",{frenzy:JSON.stringify(x)}));case 2:return e=g.b.firestore().collection("frenzies"),r.next=5,i.a.awrap(e.doc(x.id).collection("views"));case 5:return t=r.sent,r.next=8,i.a.awrap(t.doc(null==w?void 0:w.uid).get());case 8:if(n=r.sent,console.log(n.exists),!n.exists){r.next=14;break}u.navigate("Frenzy",{frenzy:JSON.stringify(x)}),r.next=19;break;case 14:return r.next=16,i.a.awrap(e.doc(x.id).update({viewCount:g.a.FieldValue.increment(1)}));case 16:return r.next=18,i.a.awrap(t.doc(null==w?void 0:w.uid).set({createdAt:g.a.FieldValue.serverTimestamp()}));case 18:u.navigate("Frenzy",{frenzy:JSON.stringify(x)});case 19:case"end":return r.stop()}}),null,null,null,Promise)};return x.id?c.a.createElement(d.a,{style:[h.frenzyContainer,v]},c.a.createElement(d.a,{style:h.frenzyAvatarContainer},c.a.createElement(d.a,{style:h.frenzyAvatar},c.a.createElement(m.a,{source:{uri:null==x?void 0:x.photo},title:null==x||null==(n=x.user)?void 0:n.charAt(0),containerStyle:{backgroundColor:"black",borderRadius:50},titleStyle:{color:"white"}}),c.a.createElement(b.b,{style:{fontSize:16,fontWeight:"700",marginLeft:10}},"@",null==x?void 0:x.user)),(null==x?void 0:x.user)===(null==w?void 0:w.username)?c.a.createElement(d.a,{style:h.frenzyEdit},c.a.createElement(m.b,{name:"edit",type:"\xebntypo",onPress:function(){return function(e){u.navigate("AddPost",e)}(x)}}),c.a.createElement(m.b,{name:"trash",type:"entypo",style:{marginLeft:10},onPress:function(){return function(e){var t,n,r,a,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,i.a.awrap(g.b.firestore().collection("frenzies").doc(e));case 3:return t=l.sent,l.next=6,i.a.awrap(t.delete());case 6:n=g.b.firestore().collection("frenzies").doc(e).collection("likes"),r=g.b.firestore().collection("frenzies").doc(e).collection("views"),a=r.orderBy("createdAt").limit(10),o=n.orderBy("createdAt").limit(10),new Promise((function(e,t){P(o,e).catch(t)})),new Promise((function(e,t){P(a,e).catch(t)})),alert("Deleted the frenzy"),O(),l.next=19;break;case 16:l.prev=16,l.t0=l.catch(0),alert("Something went wrong..");case 19:case"end":return l.stop()}}),null,null,[[0,16]],Promise)}(null==x?void 0:x.id)}})):c.a.createElement(b.b,null)),c.a.createElement(d.a,{style:h.frenzyLink},c.a.createElement(b.c,{style:{color:"blue"},onPress:function(){return s.a.openURL(null==x?void 0:x.link).catch((function(e){return alert("Couldn't Open the link")}))}},null==x?void 0:x.link)),c.a.createElement(d.a,{style:h.frenzyDescription},c.a.createElement(b.b,null,null==x?void 0:x.description),null==x||null==(r=x.tags)?void 0:r.map((function(e){return c.a.createElement(b.b,{style:{color:"blue"},key:e},"#",e)}))),c.a.createElement(d.a,{style:h.frenzyIcons},c.a.createElement(d.a,{style:h.frenzyIcon},c.a.createElement(m.b,{name:"eye",type:"antdesign",onPress:function(){return C()}}),c.a.createElement(b.b,null,null==x?void 0:x.viewCount)),c.a.createElement(d.a,{style:h.frenzyIcon},c.a.createElement(m.b,{name:null!=x&&x.liked?"heart":"hearto",type:"antdesign",onPress:function(){return function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=w&&w.uid){n.next=2;break}return n.abrupt("return");case 2:return e=g.b.firestore().collection("frenzies"),n.next=5,i.a.awrap(e.doc(x.id).collection("likes"));case 5:return t=n.sent,n.next=8,i.a.awrap(t.doc(null==w?void 0:w.uid).get());case 8:if(!n.sent.exists){n.next=16;break}return n.next=12,i.a.awrap(e.doc(x.id).update({likeCount:g.a.FieldValue.increment(-1)}));case 12:return n.next=14,i.a.awrap(t.doc(null==w?void 0:w.uid).delete());case 14:n.next=20;break;case 16:return n.next=18,i.a.awrap(e.doc(x.id).update({likeCount:g.a.FieldValue.increment(1)}));case 18:return n.next=20,i.a.awrap(t.doc(null==w?void 0:w.uid).set({createdAt:g.a.FieldValue.serverTimestamp()}));case 20:case"end":return n.stop()}}),null,null,null,Promise)}()}}),c.a.createElement(b.b,null,null==x?void 0:x.likeCount)),c.a.createElement(d.a,{style:h.frenzyIcon},c.a.createElement(m.b,{name:"chat",type:"entypo",onPress:function(){return C()}}),c.a.createElement(b.b,null,null==x?void 0:x.commentCount)))):c.a.createElement(p.a,{message:"Loading frenzy..."})};var h=u.a.create({frenzyContainer:{backgroundColor:"white",marginLeft:"auto",marginRight:"auto",marginVertical:40,width:"60%",minWidth:340,borderRadius:20},frenzyAvatarContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:10,borderBottomColor:"gray",borderBottomWidth:2},frenzyAvatar:{flexDirection:"row",alignItems:"center"},frenzyEdit:{flexDirection:"row"},frenzyLink:{padding:10},frenzyDescription:{padding:10,backgroundColor:"#ebebeb",margin:10,borderRadius:10},frenzyIcons:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",padding:10},frenzyIcon:{display:"flex",alignItems:"center"}})}).call(this,n(131))},171:function(e,t,n){e.exports=n.p+"static/media/logo.0370fd19.png"},24:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(114),a=(n(372),n(373),n(374),r.a.apps.length?r.a.app():r.a.initializeApp({apiKey:"AIzaSyBZ8MARidHHqXuVCwXmk-jIDSFkvKPFFXA",authDomain:"viral-page.firebaseapp.com",databaseURL:"https://viral-page.firebaseio.com",projectId:"viral-page",storageBucket:"viral-page.appspot.com",messagingSenderId:"393927184928",appId:"1:393927184928:web:4774c9bb6e31e97fbd6245"})),o=(r.a.auth,r.a.firestore)},26:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(160),a=Object(r.b)({name:"reducer",initialState:{user:null,userErrors:null,userLoading:null,fontsLoading:null},reducers:{setUser:function(e,t){e.user=t.payload},setUserErrors:function(e,t){e.userErrors=t.payload},setUserLoading:function(e,t){e.userLoading=t.payload},setFontsLoading:function(e,t){e.fontsLoading=t.payload}}}),o=a.actions,i=o.setUser,l=o.setUserErrors,c=o.setFontsLoading,s=o.setUserLoading,u=function(e){return e.reducer.user},d=function(e){return e.reducer.userErrors},m=function(e){var t=e.reducer,n=t.fontsLoading,r=t.userLoading,a=n||null===n;return{load:r||a,which:a?"Assets":r?"Session":"Viral Page"}};t.a=a.reducer},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(6),a=n.n(r),o=n(0),i=n.n(o),l=n(23);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=e.children,n=e.onPress;return i.a.createElement(l.a,{onPress:n,style:{color:"#000",fontSize:48,fontFamily:"ViralFont"}},t)},d=function(e){var t=e.children,n=e.style,r=e.onPress;return i.a.createElement(l.a,{onPress:r,style:s({color:"#000",fontSize:24,fontFamily:"ViralFont"},n)},t)},m=function(e){var t=e.children,n=e.style,r=e.onPress;return i.a.createElement(l.a,{onPress:r,style:s({fontSize:14,fontFamily:"ViralFont",marginVertical:0},n)},t)}},315:function(e,t,n){e.exports=n(483)},473:function(e,t,n){e.exports=n.p+"static/media/icon.b179d9aa.png"},483:function(e,t,n){"use strict";n.r(t);var r=n(504),a=n(0),o=n.n(a),i=n(34),l=n(6),c=n.n(l),s=n(12),u=n.n(s),d=n(8),m=n(277),f=n(26),p=(n(482),n(501)),b=n(502),g=n(13),y=n.n(g),h=n(49),v=n(71),O=n(30),w=n(99),E=n(42),j=n(4),x=n(5),S=n.n(x),P=n(2),C=n(23),k=n(27),z=function(e){var t=P.a.create({btn:{marginTop:e.mt||30,backgroundColor:e.bg||"black",padding:20,width:300,display:"flex",alignItems:"center",borderRadius:10},btnText:{fontFamily:"ViralFont",color:e.textColor||"white",fontSize:18}});return o.a.createElement(k.a,S()({},e,{style:[t.btn,e.style]}),o.a.createElement(C.a,{style:t.btnText},e.children))},F=n(29),L=n(56);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=P.a.create({container:{flex:1,alignItems:"center",padding:50},logo:{width:300,resizeMode:"contain"},form:{maxWidth:"30%",display:"flex",alignItems:"center"},modal:{position:"relative",flex:.5,alignItems:"center",justifyContent:"center",marginTop:"auto",backgroundColor:"#fff",borderRadius:20},closeModal:{position:"absolute",left:10,top:10}}),A=P.a.create(T(T({},R),{},{container:{alignItems:"center"},logo:{width:"400px",height:"200px",resizeMode:"contain"},form:{maxWidth:"30%",display:"flex",alignItems:"center"},modal:{marginBottom:100,position:"absolute",bottom:0,backgroundColor:"#fff",padding:20,borderRadius:20}})),V="web"===d.a.OS?A:R,I=n(503),B=n(67),W=n(47),N=function(){var e=Object(a.useState)(!1),t=u()(e,2),n=t[0],r=t[1];return o.a.createElement(j.a,null,o.a.createElement(z,{onPress:function(){return r(!0)},textColor:"black",bg:"white"},"Social Logins"),"web"===d.a.OS?o.a.createElement(I.a,{visible:n,contentContainerStyle:V.modal,overlayAccessibilityLabel:"Close"},o.a.createElement(W.b,{name:"close",containerStyle:V.closeModal,type:"antdesign",onPress:function(){return r(!1)}}),o.a.createElement(z,{bg:"#de5246",mt:20},"Google"),o.a.createElement(z,{bg:"#4267B2",mt:20},"Facebook"),o.a.createElement(z,{bg:"#1DA1F2",mt:20},"Twitter")):o.a.createElement(B.a,{animationType:"slide",transparent:!0,visible:n},o.a.createElement(j.a,{style:V.modal},o.a.createElement(W.b,{name:"close",containerStyle:V.closeModal,type:"antdesign",onPress:function(){return r(!1)}}),o.a.createElement(z,{bg:"#de5246",mt:20},"Google"),o.a.createElement(z,{bg:"#4267B2",mt:20},"Facebook"),o.a.createElement(z,{bg:"#1DA1F2",mt:20},"Twitter"))))},q=n(24);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=function(e){var t,n,r,a,o,i,l;return y.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.t0=y.a,c.next=4,y.a.awrap(q.b.firestore().collection("users").where("username","==",e.username).get());case 4:return c.t1=!!c.sent.docs.length,c.next=7,c.t0.awrap.call(c.t0,c.t1);case 7:if(!c.sent){c.next=10;break}return c.abrupt("return",[null,"Username is taken"]);case 10:return c.next=12,y.a.awrap(q.b.auth().createUserWithEmailAndPassword(e.email,e.password));case 12:return o=c.sent,c.next=15,y.a.awrap(null==(t=o.user)?void 0:t.updateProfile({displayName:e.name,photoURL:"https://avatars.dicebear.com/api/identicon/"+e.username+".svg"}));case 15:return c.next=17,y.a.awrap(null==(n=o.user)?void 0:n.sendEmailVerification());case 17:return c.next=19,y.a.awrap(q.b.firestore().collection("users").doc(null==o||null==(r=o.user)?void 0:r.uid).set({username:e.username}).then((function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(q.b.firestore().collection("users").doc(null==o||null==(e=o.user)?void 0:e.uid).get());case 2:return t=n.sent,n.abrupt("return",t.data());case 4:case"end":return n.stop()}}),null,null,null,Promise)})));case 19:return i=c.sent,l=H(H({},null==(a=o.user)?void 0:a.toJSON()),{},{status:"loggedin"},i),c.abrupt("return",[l,null]);case 24:return c.prev=24,c.t2=c.catch(0),c.abrupt("return",[null,c.t2.message]);case 27:case"end":return c.stop()}}),null,null,[[0,24]],Promise)},M=function(e){var t,n,r,a,o;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,y.a.awrap(q.b.auth().signInWithEmailAndPassword(e.email,e.password));case 3:return r=i.sent,i.next=6,y.a.awrap(q.b.firestore().collection("users").doc(null==r||null==(t=r.user)?void 0:t.uid).get());case 6:return a=i.sent,o=H(H({},null==(n=r.user)?void 0:n.toJSON()),{},{status:"loggedin"},a.data()),i.abrupt("return",[o,null]);case 11:return i.prev=11,i.t0=i.catch(0),i.abrupt("return",[null,i.t0.message]);case 14:case"end":return i.stop()}}),null,null,[[0,11]],Promise)},X=n(283),G=n(63),K=o.a.forwardRef((function(e,t){var n=e.touched&&e.errors?"#FF5A5F":"#ff4d00",r=P.a.create({input:{backgroundColor:"#fff",shadowColor:n,marginTop:20,width:300,paddingHorizontal:20,paddingVertical:14,fontFamily:"ViralFont",fontSize:18,borderRadius:10}});return o.a.createElement(j.a,{style:e.containerStyle},o.a.createElement(G.a,S()({},e,{style:[r.input,e.style],selectionColor:"orange",ref:t})),e.validate?o.a.createElement(F.b,{style:{color:n}},e.errors):null)})),Y=n(65),Z=function(e){var t=Object(Y.a)().shape(e.validationSchema),n=Object(X.a)({initialValues:e.state,validationSchema:t,onSubmit:e.onSubmit}),r=n.handleChange,i=n.values,l=n.handleSubmit,c=n.handleBlur,s=n.errors,u=n.touched,d=n.resetForm,m=e.children.map((function(){return Object(a.useRef)()})),f=Object(a.useRef)(null);return o.a.createElement(j.a,{style:e.containerStyle},e.children.map((function(t,n){return o.a.createElement(K,S()({validate:!!e.validationSchema,containerStyle:e.inputContainerStyle,style:e.inputStyle},t,{value:i[t.name],onChangeText:r(""+t.name),key:t.name,onBlur:c(""+t.name),touched:u[t.name],errors:s[t.name],ref:function(e){return m[n].current=e},onSubmitEditing:function(){return s[t.name]?null:function(e){var t;m.length-1===e?l():null==(t=m[e+1].current)||t.focus()}(n)}}))})),e.Component?o.a.createElement(e.Component,{ref:f}):o.a.createElement(j.a,null),o.a.createElement(z,{style:e.button.style,onPress:function(){return l(),void d()}},e.button.title))},Q=function(){var e=Object(h.k)(),t=Object(i.c)(f.h),r=Object(i.b)(),a=Object(i.c)(f.b);return a.load?o.a.createElement(L.a,null):o.a.createElement(E.a,null,o.a.createElement(v.a,{style:V.container},o.a.createElement(O.a,{source:n(171),style:V.logo}),o.a.createElement(w.a,{style:V.form},o.a.createElement(F.b,{style:{width:320,textAlign:"center"}},t),o.a.createElement(Z,{state:{email:"",password:""},children:[{placeholder:"Email",keyboardType:"email-address",textContentType:"emailAddress",name:"email"},{placeholder:"Password",secureTextEntry:!0,textContentType:"password",name:"password"}],validationSchema:{email:Y.b().email("Invalid email").required("Required"),password:Y.b().required("Required")},button:{title:"Login"},onSubmit:function(t){return function(t){var n,a,o,i;return y.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r(Object(f.g)(!0)),l.next=3,y.a.awrap(M(t));case 3:n=l.sent,a=u()(n,2),o=a[0],(i=a[1])?(r(Object(f.f)(i)),r(Object(f.g)(!1))):o&&(null!=o&&o.emailVerified?(r(Object(f.e)(o)),e.replace("Home"),r(Object(f.g)(!1))):null!=o&&o.emailVerified||(r(Object(f.f)("Account is not verified")),r(Object(f.g)(!1))));case 8:case"end":return l.stop()}}),null,null,null,Promise)}(t)}}),o.a.createElement(z,{onPress:function(){return e.replace("Register")},bg:"white",textColor:"black"},"Register")),o.a.createElement(N,null)),o.a.createElement(j.a,{style:{height:50}}))},$=function(){var e=Object(h.k)(),t=Object(i.c)(f.h),r=Object(i.b)(),a=Object(i.c)(f.b);return a.load?o.a.createElement(L.a,null):o.a.createElement(E.a,null,o.a.createElement(v.a,{style:V.container},o.a.createElement(O.a,{source:n(171),style:V.logo}),o.a.createElement(w.a,null,o.a.createElement(F.b,null,t),o.a.createElement(Z,{state:{name:"",username:"",email:"",password:""},validationSchema:{name:Y.b().required("Required"),username:Y.b().required("Required"),email:Y.b().email("Invalid email").required("Required"),password:Y.b().min(6,"Too Short!").required("Required")},children:[{placeholder:"Name",textContentType:"name",name:"name"},{placeholder:"Username",textContentType:"username",name:"username"},{placeholder:"Email",keyboardType:"email-address",textContentType:"emailAddress",name:"email"},{placeholder:"Password",secureTextEntry:!0,textContentType:"password",name:"password"}],button:{title:"Register"},onSubmit:function(t){return function(t){var n,a,o,i;return y.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r(Object(f.g)(!0)),l.next=3,y.a.awrap(J(t));case 3:n=l.sent,a=u()(n,2),o=a[0],i=a[1],o&&(alert("Account has been created and a confirmation link has been sent to your email. Confirm your email and login"),e.navigate("Login")),i&&r(Object(f.f)(i)),r(Object(f.g)(!1));case 10:case"end":return l.stop()}}),null,null,null,Promise)}(t)}}),o.a.createElement(z,{onPress:function(){return e.replace("Login")},bg:"white",textColor:"black"},"Login")),o.a.createElement(N,null)),o.a.createElement(j.a,{style:{height:50}}))},_=n(55),ee=n(96),te=n(83),ne=n(157),re=n(32);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function(e){var t=e.children,n=Object(a.useState)(null),r=u()(n,2),l=r[0],c=r[1],s=Object(a.useState)(0),d=u()(s,2),m=d[0],p=d[1],b=q.b.firestore().collection("frenzies"),g=Object(a.useState)(b.orderBy("createdAt","desc").limit(3)),h=u()(g,2),v=h[0],O=h[1],w=Object(i.c)(f.c);return Object(a.useEffect)((function(){var e=v.onSnapshot((function(e){c("loading"),console.log("Change!!");var t=e.docs.map((function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=oe,t.t1=oe({},e.data()),t.t2={},t.t3=y.a,t.next=6,y.a.awrap(e.ref.collection("likes").doc(null==w?void 0:w.uid).get());case 6:return t.t4=t.sent.exists,t.next=9,t.t3.awrap.call(t.t3,t.t4);case 9:return t.t5=t.sent,t.t6=y.a,t.next=13,y.a.awrap(e.ref.collection("views").doc(null==w?void 0:w.uid).get());case 13:return t.t7=t.sent.exists,t.next=16,t.t6.awrap.call(t.t6,t.t7);case 16:return t.t8=t.sent,t.t9=e.id,t.t10={liked:t.t5,viewed:t.t8,id:t.t9},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t10));case 20:case"end":return t.stop()}}),null,null,null,Promise)}));Promise.all(t).then((function(e){c(e)}))}));return function(){return e()}}),[v,m]),l&&"loading"!==l?(console.log(l),o.a.createElement(j.a,null,l.length>2?t({frenzies:l.filter((function(e,t){return t<2}))}):t({frenzies:l}),o.a.createElement(j.a,null,o.a.createElement(z,{onPress:function(){return e=l[(null==l?void 0:l.length)-1],p(m+1),void O(v.startAt(e.createdAt).limit(3));var e},disabled:l.length<2,style:[{marginLeft:"auto",marginRight:"auto",width:300},l.length<2?{opacity:.5}:{}]},"Next \ud83d\udc49"),o.a.createElement(z,{onPress:function(){return e=l[0],console.log("Previous Change"+JSON.stringify(e)+"\n\n"),p(m-1),v.endBefore(e.createdAt).limit(3).get().then((function(e){return console.log(e.docs.map((function(e){return e.data()})))})),void O(v.endBefore(e.createdAt).limitToLast(2));var e},disabled:0===m,style:[{marginLeft:"auto",marginRight:"auto",width:300},0===m?{opacity:.5}:{}]},"Previous \ud83d\udc48"),o.a.createElement(F.b,{style:{textAlign:"center",marginTop:20}},"Page : ",m+1)))):o.a.createElement(j.a,{style:{minHeight:re.a.get("window").height}},o.a.createElement(L.a,{message:"Loading Frenzies.."}))},le=function(){var e=o.a.useState(!1),t=u()(e,2),r=t[0],l=t[1],c=o.a.useCallback((function(){l(!0),te.a.DevSettings.reload()}),[]),s=Object(h.k)(),d=Object(i.c)(f.c),m=function(){null!=d&&d.uid?q.b.auth().signOut().then((function(){p(Object(f.e)({status:"signedout"})),alert("Successfully Logged Out"),s.replace("Home")})):s.navigate("Login")};Object(a.useLayoutEffect)((function(){s.setOptions({header:function(){return o.a.createElement(v.a,{style:ce.header},o.a.createElement(O.a,{source:n(473),style:ce.headerImage}),o.a.createElement(k.a,{onPress:m},o.a.createElement(F.c,null,null!=d&&d.uid?"Sign Out":"Sign In")))}})}),[s]);var p=Object(i.b)();return o.a.createElement(E.a,{bounces:!0,refreshControl:o.a.createElement(ee.a,{refreshing:r,onRefresh:c})},null!=d&&d.uid?o.a.createElement(k.a,{onPress:function(){return s.navigate("AddPost")},style:ce.newPost},o.a.createElement(F.b,{style:{color:"white",textAlign:"center"}},"New Post")):o.a.createElement(F.c,null),o.a.createElement(ie,null,(function(e){var t=e.frenzies;return o.a.createElement(o.a.Fragment,null,t.map((function(e){return o.a.createElement(ne.a,{Frenzy:e,key:e.id,navigation:s})})))})),o.a.createElement(j.a,{style:{height:50}}))},ce=P.a.create({header:{backgroundColor:"white",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingTop:_.a.currentHeight,paddingRight:20,paddingLeft:20},headerImage:{width:48,height:48},headerBtn:{width:100,marginTop:0,padding:10},newPost:{padding:10,backgroundColor:"black"}}),se=n(284);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(e){var t,n,r,l=e.route,c=Object(h.k)();Object(a.useLayoutEffect)((function(){c.setOptions({headerTitle:"Create a new frenzy \ud83d\udd25"})}),[]);var s=Object(i.c)(f.c),d=Object(a.useState)(!1),m=u()(d,2),p=m[0],b=m[1],g=Object(a.useState)(null),y=u()(g,2),v=y[0],O=y[1],w=Object(a.useState)(null),j=u()(w,2),x=j[0],S=j[1],P=Object(a.useState)(null),D=u()(P,2),T=D[0],R=D[1],A=Object(a.useState)((null==(t=l.params)?void 0:t.tags)||[]),V=u()(A,2),B=V[0],N=V[1];return p?o.a.createElement(L.a,{message:"Adding Frenzy..."}):o.a.createElement(E.a,{style:{display:"flex"},contentContainerStyle:{alignItems:"center",justifyContent:"center",minHeight:"100%"}},o.a.createElement(Z,{validationSchema:{link:Y.b().url("Invalid URL").required("Required!")},state:{link:(null==(n=l.params)?void 0:n.link)||"",description:(null==(r=l.params)?void 0:r.description)||""},children:[{name:"link",placeholder:"Link",textContentType:"URL"},{name:"description",placeholder:"Description",multiline:!0,style:{height:T||"auto"},onContentSizeChange:function(e){return R(e.nativeEvent.contentSize.height)}}],Component:o.a.forwardRef((function(e,t){return o.a.createElement(se.a,{initialText:"",textInputProps:{placeholder:"Tags"},initialTags:B,onChangeTags:function(e){return N(e)},onTagPress:function(e,t,n,r){return console.log(e,t,n,r?"deleted":"not deleted")},containerStyle:{width:300},inputContainerStyle:{backgroundColor:"none",width:300,flexBasis:"100%",height:60,marginBottom:20,marginTop:20},inputStyle:{backgroundColor:"#fff",paddingHorizontal:20,fontFamily:"ViralFont",fontSize:18,borderRadius:10},maxNumberOfTags:30,renderTag:function(e){var t=e.tag,n=e.index,r=e.onPress;return o.a.createElement(k.a,{key:t+"-"+n,onPress:r,style:{backgroundColor:"black",minWidth:50,marginVertical:10,borderRadius:20,paddingVertical:10,paddingHorizontal:15,marginTop:10,marginHorizontal:5}},o.a.createElement(C.a,{style:{color:"white",textAlign:"center",fontWeight:"700"}},"#",t))}})})),isComponent:!0,button:{title:"Launch Frenzy \ud83d\ude80"},onSubmit:function(e){return function(e){var t;b(!0),null!=(t=l.params)&&t.id?q.b.firestore().collection("frenzies").doc(l.params.id).update(de(de({},e),{},{updatedAt:q.a.FieldValue.serverTimestamp()})).then((function(){q.b.firestore().collection("frenzies").doc(l.params.id).get().then((function(e){b(!1),S(e.data())}))})).catch((function(e){O(e.message)})):q.b.firestore().collection("frenzies").add(de(de({},e),{},{user:null==s?void 0:s.username,photo:null==s?void 0:s.photoURL,likeCount:0,viewCount:0,commentCount:0,createdAt:q.a.FieldValue.serverTimestamp(),updatedAt:q.a.FieldValue.serverTimestamp()})).then((function(e){e.get().then((function(e){b(!1),S(e.data())}))})).catch((function(e){O(e.message)}))}(de(de({},e),{},{tags:B}))}}),o.a.createElement(C.a,{style:{fontStyle:"italic",textAlign:"center",marginTop:20}},"Click space to add a tag after typing and press the tag to remove it"),o.a.createElement(I.a,{visible:!!x,dismissable:!0,contentContainerStyle:{backgroundColor:"white",width:320,marginLeft:"auto",marginRight:"auto",display:"flex",alignItems:"center",paddingVertical:20,borderRadius:20}},o.a.createElement(W.b,{name:"close",containerStyle:{alignSelf:"flex-start",marginLeft:10},type:"antdesign",onPress:function(){S(null),c.goBack()}}),o.a.createElement(F.a,null,"\ud83d\ude80"),o.a.createElement(F.c,null,"Frenzy is Launched"),o.a.createElement(z,{onPress:function(){return c.navigate("Frenzy",{frenzy:JSON.stringify(x)})}},"View")),o.a.createElement(I.a,{visible:!!v,dismissable:!0,contentContainerStyle:{backgroundColor:"white",width:320,marginLeft:"auto",marginRight:"auto",display:"flex",alignItems:"center",paddingVertical:20,borderRadius:20}},o.a.createElement(W.b,{name:"close",containerStyle:{alignSelf:"flex-start",marginLeft:10},type:"antdesign",onPress:function(){O(null)}}),o.a.createElement(F.a,null,"\ud83d\ude2d"),o.a.createElement(F.c,null,v||"Something went wrong"),o.a.createElement(z,{onPress:function(){O(null)}},"Retry")))},fe=function(e){return o.a.createElement(j.a,{style:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#ebeced"}},o.a.createElement(O.a,{source:n(171),style:{width:400,height:200,resizeMode:"contain"}}),o.a.createElement(C.a,{style:{fontFamily:"monospace",fontSize:30}},e.message||"Error..."),o.a.createElement(z,{onPress:function(){return te.a.DevSettings.reload()}},"Retry"))},pe=function(e){var t=e.reply,n=Object(i.c)(f.c);return o.a.createElement(j.a,{style:{flexDirection:"row",marginLeft:20,borderTopColor:"gray",borderBottomColor:"gray",borderTopWidth:2,borderBottomWidth:2,justifyContent:"space-between",alignItems:"center",marginVertical:10,padding:10}},o.a.createElement(j.a,null,o.a.createElement(F.b,{style:{fontWeight:"700",color:"orange"}},"@",t.by," ",o.a.createElement(F.b,{style:{opacity:.8,fontStyle:"italic"}},"said")),o.a.createElement(F.c,{style:{fontSize:18,marginLeft:2,marginVertical:5}},t.reply)),t.by===(null==n?void 0:n.username)?o.a.createElement(j.a,{style:{flexDirection:"row",width:100,justifyContent:"space-between"}},o.a.createElement(W.b,{name:"edit",type:"entypo"}),o.a.createElement(W.b,{name:"trash",type:"entypo"})):null)};function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t=e.Comment,n=e.frenzyId,r=Object(a.useState)(ge(ge({},t),{},{replies:[]})),l=u()(r,2),c=l[0],s=l[1],d=Object(a.useState)(!1),m=u()(d,2),p=m[0],b=m[1],g=Object(i.c)(f.c);return Object(a.useEffect)((function(){var e=q.b.firestore().collection("frenzies").doc(n).collection("comments").doc(c.id).collection("replies").onSnapshot((function(e){var n=[];e.docs.map((function(e){n.push(ge(ge({},e.data()),{},{id:e.id}))})),s(ge(ge({},t),{},{replies:n}))}));return function(){return e()}}),[t]),o.a.createElement(j.a,{style:{backgroundColor:"white",paddingHorizontal:20,paddingVertical:10,marginVertical:20,width:"80%",minWidth:re.a.get("window").width}},o.a.createElement(j.a,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},o.a.createElement(j.a,null,o.a.createElement(F.b,{style:{fontWeight:"700",color:"orange"}},"@",c.by," ",o.a.createElement(F.b,{style:{opacity:.8,fontStyle:"italic"}},"said")),o.a.createElement(F.c,{style:{fontSize:18,marginLeft:2,marginVertical:5}},c.comment),o.a.createElement(F.b,{onPress:function(){return b(!p)},style:{textDecoration:"underline",color:"blue"}},"View Reply")),c.by===(null==g?void 0:g.username)?o.a.createElement(j.a,{style:{flexDirection:"row",width:100,justifyContent:"space-between"}},o.a.createElement(W.b,{name:"edit",type:"entypo"}),o.a.createElement(W.b,{name:"trash",type:"entypo"})):null),p?o.a.createElement(o.a.Fragment,null,null!=g&&g.uid?o.a.createElement(j.a,{style:{alignSelf:"stretch"}},o.a.createElement(Z,{inputContainerStyle:{flex:1,alignItems:"center"},inputStyle:{alignSelf:"stretch",width:"auto",borderRadius:0,borderColor:"gray",borderWidth:1},containerStyle:{flexDirection:"row",alignItems:"flex-end"},state:{reply:""},children:[{name:"reply",placeholder:"Replying to "+c.by}],button:{title:"Reply",style:{marginTop:0,borderRadius:0,paddingVertical:15,width:"auto"}},onSubmit:function(e){return t=null==e?void 0:e.reply,y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.awrap(q.b.firestore().collection("frenzies").doc(n).collection("comments").doc(c.id).collection("replies").add({createdAt:q.a.FieldValue.serverTimestamp(),updatedAt:q.a.FieldValue.serverTimestamp(),reply:t,by:null==g?void 0:g.username}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert("Could not add your reply");case 8:case"end":return e.stop()}}),null,null,[[0,5]],Promise);var t},isComponent:!1})):null,o.a.createElement(j.a,null,c.replies.map((function(e){return o.a.createElement(pe,{key:e.id,reply:e})})))):null)};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(e){var t,n=e.route,r=Object(h.k)(),l=Object(i.c)(f.c),c=Object(a.useState)(ve(ve({},JSON.parse(n.params.frenzy)),{},{status:"idle"})),s=u()(c,2),d=s[0],m=s[1],p=Object(a.useState)(!1),b=u()(p,2),g=b[0],v=b[1];return Object(a.useLayoutEffect)((function(){d&&r.setOptions({headerTitle:"@"+(null==d?void 0:d.user)+" | "+(null==d?void 0:d.link)})}),[d]),Object(a.useEffect)((function(){y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:q.b.firestore().collection("frenzies").doc(d.id).onSnapshot((function(e){var t,n,r,a;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=ve(ve({},e.data()),{},{id:e.id}),o.next=3,y.a.awrap(q.b.firestore().collection("frenzies").doc(e.id).collection("likes").doc(null==l?void 0:l.uid).get());case 3:return n=o.sent,t=ve(ve({},t),{},{liked:n.exists}),o.next=7,y.a.awrap(q.b.firestore().collection("frenzies").doc(e.id).collection("views").doc(null==l?void 0:l.uid).get());case 7:return r=o.sent,t=ve(ve({},t),{},{viewed:r.exists}),o.next=11,y.a.awrap(q.b.firestore().collection("frenzies").doc(e.id).collection("comments").get());case 11:(a=o.sent).docs.map((function(e){return e.data()}),e.id),t=ve(ve({},t),{},{comments:a.docs.map((function(e){return ve(ve({},e.data()),{},{id:e.id})}))}),t=ve(ve({},t),{},{status:"loaded"}),console.log("Changing",t),m(t);case 17:case"end":return o.stop()}}),null,null,null,Promise)}));case 1:case"end":return e.stop()}}),null,null,null,Promise)}),[]),"idle"===d.status?o.a.createElement(L.a,{message:"Loading Frenzy"}):o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{style:{flex:1},contentContainerStyle:{alignItems:"center"}},o.a.createElement(ne.a,{containerStyle:{marginVertical:0,borderRadius:0,minWidth:re.a.get("window").width},Frenzy:d,navigation:r,afterDelete:function(){return r.goBack()}}),g?o.a.createElement(L.a,{message:"Adding Comment..."}):o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{style:{minWidth:re.a.get("window").width,width:"60%",marginLeft:"auto",marginRight:"auto"}},null!=l&&l.uid?o.a.createElement(o.a.Fragment,null,o.a.createElement(Z,{inputContainerStyle:{flex:1,alignItems:"center"},inputStyle:{alignSelf:"stretch",width:"auto",borderRadius:0},containerStyle:{flexDirection:"row",alignItems:"flex-end"},state:{comment:""},children:[{name:"comment",placeholder:"Write what you feel..."}],button:{title:"Comment",style:{marginTop:0,borderRadius:0,paddingVertical:14,width:"auto"}},onSubmit:function(e){return t=e.comment,y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,y.a.awrap(q.b.firestore().collection("frenzies").doc(d.id).update({commentCount:q.a.FieldValue.increment(1)}));case 4:return e.next=6,y.a.awrap(q.b.firestore().collection("frenzies").doc(d.id).collection("comments").add({createdAt:q.a.FieldValue.serverTimestamp(),updatedAt:q.a.FieldValue.serverTimestamp(),comment:t,by:null==l?void 0:l.username}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Could not add your comment");case 11:v(!1);case 12:case"end":return e.stop()}}),null,null,[[1,8]],Promise);var t},isComponent:!1})):o.a.createElement(o.a.Fragment,null,o.a.createElement(z,{style:{marginLeft:"auto",marginRight:"auto"},onPress:function(){return r.navigate("Login")}},"Login to comment"))),o.a.createElement(j.a,{style:{flex:1}},o.a.createElement(j.a,{style:{flex:.75}},null==(t=d.comments)?void 0:t.map((function(e){return o.a.createElement(ye,{Comment:e,frenzyId:d.id,key:e.id})})))))))},we=n(179);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(){var e=Object(b.a)();"web"!==d.a.OS&&m.LogBox.ignoreLogs(["Setting a timer for a long period of time"]);var t=Object(i.c)(f.c),n=Object(a.useState)(!1),r=u()(n,2),l=r[0],c=r[1],s=Object(a.useState)(""),g=u()(s,2),y=g[0],h=g[1],v=Object(i.b)(),O=Object(we.b)({ViralFont:we.a}),w=u()(O,1)[0];return Object(a.useEffect)((function(){v(w?Object(f.d)(!1):Object(f.d)(!0))}),[w]),Object(a.useEffect)((function(){v(Object(f.g)(l))}),[l]),Object(a.useEffect)((function(){if((null==t||!t.uid)&&"signedout"!==(null==t?void 0:t.status)){c(!0);var e=q.b.auth().onAuthStateChanged((function(e){q.b.firestore().collection("users").doc(null==e?void 0:e.uid).get().then((function(t){v(Object(f.e)(je(je(je({},null==e?void 0:e.toJSON()),t.data()),{},{status:"loggedin"}))),c(!1)})).catch((function(e){"unavailable"===e.code?h("Check Your Network Connection And Try Again"):h(e.message),c(!1)}))}));return function(){return e()}}}),[]),y?o.a.createElement(fe,{message:y}):!w||l?o.a.createElement(L.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,null,o.a.createElement(e.Navigator,{initialRouteName:"Home",screenOptions:{headerTitleAlign:"center",headerTitleStyle:{fontFamily:"ViralFont",fontWeight:"800"}}},o.a.createElement(e.Screen,{name:"Home",component:le}),o.a.createElement(e.Screen,{name:"AddPost",component:me}),o.a.createElement(e.Screen,{name:"Frenzy",component:Oe}),o.a.createElement(e.Screen,{name:"Login",component:Q}),o.a.createElement(e.Screen,{name:"Register",component:$}))))}var Se=n(160),Pe=Object(Se.a)({reducer:{reducer:f.a}});t.default=Object(r.a)((function(){return o.a.createElement(i.a,{store:Pe},o.a.createElement(xe,null))}))},56:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(4),i=n(23),l=n(34),c=n(26);t.a=function(e){var t=Object(l.c)(c.b);return a.a.createElement(o.a,{style:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#ebeced"}},a.a.createElement(i.a,{style:{fontFamily:"monospace",fontSize:30}},e.message||"Loading "+t.which+"..."))}}},[[315,1,2]]]);
//# sourceMappingURL=app.58d9646b.chunk.js.map